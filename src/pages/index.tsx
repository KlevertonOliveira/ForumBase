import { useState } from 'react';
import type { NextPage } from 'next';
import Head from 'next/head';

import Navbar from '../components/Navbar';
import Drawer from '../components/Drawer';
import Table from '../components/Table';
import Posts from '../components/Posts';

import { Box, Container, Flex, Input, InputGroup, InputLeftElement, Select, Text, useColorModeValue, VStack } from '@chakra-ui/react';
import { SearchIcon } from '@chakra-ui/icons';

import { categories } from '../data/categories';
import { posts } from '../data/posts';

const Home: NextPage = () => {

  const [currentSelectedCategory, setCurrentSelectedCategory] = useState("ALL");

  return (
    <Box
      bg={useColorModeValue('mainGray.100', 'transparent')}
      minH={'100vh'}
    >
      <Head>
        <title>ForumBase | Home</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <header>
        <Navbar />
      </header>

      <main>

        <Container maxW='container.lg' my={8}>

          {/* Section 1 -> Create Post Button + Search Input */}
          <Flex
            as='section'
            w='full'
            mt={8}
            alignItems={'center'}
            gap={{ base: 4, sm: 6, lg: 8 }}>

            <Drawer />

            <InputGroup flex={1}>
              <InputLeftElement mt={1}>
                <SearchIcon />
              </InputLeftElement>

              <Input
                id='search'
                name='search'
                placeholder='Search Post'
                size='lg'
              />
            </InputGroup>
          </Flex>

          {/* Section 2 (Mobile) - Category Filter Selection (Up to md size)*/}
          <Flex
            as='section'
            w='full'
            mt={8}
            display={{ base: 'flex', md: 'none' }}
            alignItems={'center'}
            gap={3}>

            <Text fontWeight={'semibold'}>Category: </Text>
            <Select id='category' name='category' bg={useColorModeValue('white', 'gray.700')}>
              <option value="all">ALL</option>
              {
                categories.map(category =>
                  <option key={category.title} value={category.title}>{category.title}</option>
                )
              }
            </Select>
          </Flex>

          {/* Section 2 (Md and greater) -> Category Select + Posts */}
          <Flex
            as='section'
            mt={8}
            w='full'
            alignItems={'flex-start'}
            gap={{ base: 4, sm: 6, lg: 8 }}
          >
            <Box display={{ base: 'none', md: 'flex' }}>
              <Table
                currentSelectedCategory={currentSelectedCategory}
                setCurrentSelectedCategory={setCurrentSelectedCategory}
              />
            </Box>

            <Box flex={1} minW={0} mt={{ base: 6, md: 10 }}>
              <Posts posts={posts} />
            </Box>
          </Flex>    
        </Container>
      </main>
    </Box>
  );
};

export default Home;
